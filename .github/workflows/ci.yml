name: Devops journey  Pipeline

on:
   push:
     branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
     - name: checkout repository
       uses: actions/checkout@v3
     - name: Check docker version 
       run: docker --version
     - name: setup docker buildx 
       uses: docker/setup-buildx-action@v2
     - name: create a docker cache layers
       uses: actions/cache@v3
       with:
        path: /tmp/.buildx-cache
        key: ${{ runner.os }}-buildx-${{ github.sha }}
        restore-keys: |
          ${{runner.os}}-buildx-
         
 

     - name: Build docker images for calculator.go 
       run: docker build -t calculator.go -f dockerfile9 .

     - name: run docker container with input  
       run: echo "2 + 3" | docker run --rm  -i calculator.go 
